<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>edge filters</title><meta name=description content="felladog"><meta name=author content="Utsav Darlami"><link rel="shortcut icon" href=/blogs/img/21-512.png><link rel=stylesheet href=/blogs/css/style.css><link rel=stylesheet href=/blogs/css/syntax.css><link rel=stylesheet href=/blogs/css/toc.css><link rel=stylesheet href=/blogs/katex/katex.min.css><script defer src=/blogs/katex/katex.min.js></script><script defer src=/blogs/katex/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script></head><body><header></header><main><div class=toc><nav id=TableOfContents><ul><li><a href=#robert-scharr-prewitt-farid>Robert, Scharr, Prewitt, Farid</a></li><li><a href=#sobel>Sobel</a></li><li><a href=#canny-edge>Canny edge</a><ul><li><a href=#algorithm>Algorithm</a></li><li><a href=#python-implementation>Python implementation</a></li></ul></li></ul></nav><a href=# class=back-to-top>Back to top</a></div><script src=https://utsavdarlami.github.io/blogs/js/libs/jquery/3.3.1/jquery.slim.min.js></script><script>(function(){var a=$('#TableOfContents'),b;if(a.length>0){b=$(window);function c(){var e=b.scrollTop(),f=$('.body h1, .body h2, .body h3, .body h4, .body h5, .body h6'),c="",d;if(f.each(function(b,a){a=$(a),a.offset().top-10<=e&&(c=a.attr('id'))}),d=a.find('a.current'),d.length==1&&d.eq(0).attr('href')=='#'+c)return!0;d.each(function(b,a){$(a).removeClass('current').siblings('ul').hide()}),a.find('a[href="#'+c+'"]').parentsUntil('#TableOfContents').each(function(b,a){$(a).children('a').addClass('current').siblings('ul').show()})}b.on('scroll',c),$(document).ready(function(){a.find('a').parent('li').find('ul').hide(),c(),document.getElementsByClassName('toc')[0].style.display=''})}})()</script><p align=right><a href=https://utsavdarlami.github.io/>home</a> |
<a href=https://utsavdarlami.github.io/blogs/>blogs</a> |
<a href=https://utsavdarlami.github.io/blogs/notes>notes</a> |
<a href=https://utsavdarlami.github.io/blogs/about>about me</a> |
<a href=https://utsavdarlami.github.io/blogs/tags>tags</a> |
<a href=https://utsavdarlami.github.io/blogs/categories>categories</a> |
<a href=https://utsavdarlami.github.io/blogs/index.xml>feed</a></p><article><h1>edge filters</h1><div style=float:left><time>Created Date : 2021 May 31</time></div><br><div style=float:left><time>Last Modified : 2021 July 13</time></div><hr><div>tags:
<a href=/blogs/tags/edge>edge</a>
<a href=/blogs/tags/filters>filters</a>
<a href=/blogs/tags/canny>canny</a>
<a href=/blogs/tags/sobel>sobel</a></div><div style=float:left>categories:
<a href=/blogs/categories/image-processing>image processing</a></div><div><hr><ul><li><p>References :</p><ul><li>Done Reading</li><li>Reading<ul><li><a href=https://nptel.ac.in/courses/106/106/106106224/>https://nptel.ac.in/courses/106/106/106106224/</a> [IIT Madras Week 2 part 1]</li><li><a href=https://www.cs.cornell.edu/courses/cs5670/2020sp/lectures/lec02%5Fedge.pdf>Cornell CV lecture on Edge</a></li><li><a href=https://szeliski.org/Book/>https://szeliski.org/Book/</a> [Book Chapter 3]</li><li><a href=https://www.wikiwand.com/en/Sobel%5Foperator>https://www.wikiwand.com/en/Sobel%5Foperator</a></li><li><a href="https://docs.google.com/presentation/d/1%5FZOtT17Ih2P-MRbWtZ8CTRQaJBz9V6-5%5FVA00QebiQQ/edit#slide=id.g36d6019af2%5F0%5F126">Joseph Redmon Lectures</a></li><li><a href=https://evergreenllc2020.medium.com/fundamentals-of-image-gradients-and-edge-detection-b093662ade1b>https://evergreenllc2020.medium.com/fundamentals-of-image-gradients-and-edge-detection-b093662ade1b</a></li></ul></li><li>To read:</li></ul></li><li><p>Questions :</p></li></ul><hr><ul><li>Criteria for a good edge detector<ul><li>Good detection<ul><li>find all real edges, ignoring noise or other artifacts</li></ul></li><li>Good Localization<ul><li>detect edges as close as possible to true edges</li></ul></li><li>Single Response<ul><li>return one point only for each true edge point</li></ul></li></ul></li></ul><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>skimage.filters</span> <span class=kn>import</span> <span class=n>roberts</span><span class=p>,</span> <span class=n>sobel</span><span class=p>,</span> <span class=n>scharr</span><span class=p>,</span> <span class=n>prewitt</span><span class=p>,</span> <span class=n>farid</span>
<span class=n>roberts_img</span> <span class=o>=</span> <span class=n>roberts</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
<span class=n>sobel_img</span> <span class=o>=</span> <span class=n>sobel</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
<span class=n>scharr_img</span> <span class=o>=</span> <span class=n>scharr</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
<span class=n>prewitt_img</span> <span class=o>=</span> <span class=n>prewitt</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
<span class=n>farid_img</span> <span class=o>=</span> <span class=n>farid</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
</code></pre></div><h2 id=robert-scharr-prewitt-farid>Robert, Scharr, Prewitt, Farid</h2><p></p><figure><img src=/blogs/ox-hugo/2021-05-30_15-35-13_screenshot.png alt="Figure 1: from nptel [IIT Madras] CV lecture slide Week 2 part 1" width=450 height=250><figcaption><p>Figure 1: from nptel [IIT Madras] CV lecture slide Week 2 part 1</p></figcaption></figure><ul><li><p><em>The x-coordinate in figure ref:edge-filter-kernel is defined as increasing in the &ldquo;right&rdquo;-direction, and the y-coordinate is defined as increasing in the &ldquo;down&rdquo;-direction. At each point in the image, the resulting gradient approximations can be combined to give the gradient magnitude, using:</em> [wikipedia]</p><p>\( {M} = \sqrt{ ({M}_{x})^{2} + ({M}_{y})^{2}} \)</p></li><li><p>Using this information, we can also calculate the gradient&rsquo;s direction(orientation):</p><p>\( \Theta = \arctan{\frac{M_{y}}{M_{x}}} \)</p></li></ul><p>where, for example, \(\Theta\) is 0 for a vertical edge which is lighter on the right side.</p><h2 id=sobel>Sobel</h2><figure><img src=/blogs/ox-hugo/2021-05-30_15-43-53_screenshot.png width=450 height=250></figure><ul><li>Computes the image gradient in the x direction</li></ul><figure><img src=/blogs/ox-hugo/2021-05-30_15-44-40_screenshot.png alt="Figure 2: from nptel [IIT Madras] CV lecture slide Week 2 part 1" width=450 height=250><figcaption><p>Figure 2: from nptel [IIT Madras] CV lecture slide Week 2 part 1</p></figcaption></figure><ul><li>Computes the image gradient in the y direction</li></ul><h2 id=canny-edge>Canny edge</h2><h3 id=algorithm>Algorithm</h3><ul><li>Smooth image (only want “real” edges, not noise)</li><li>Calculate gradient direction and magnitude</li><li>Non-maximum suppression perpendicular to edge<ul><li>check if pixel is local maximum along gradient problem</li></ul></li><li>Threshold into strong, weak, no edge<ul><li>Define two thresholds: low and high</li><li>hysteresis:<ul><li>Use the high threshold to start edge curves and the low threshold to continue them</li></ul></li><li>if gradient at pixel > &lsquo;High&rsquo; = &lsquo;edge pixel&rsquo;</li><li>if gradient at pixel &lt; &lsquo;Low&rsquo; = &lsquo;non edge pixel&rsquo;</li><li>if gradient at pixel >= &lsquo;Low&rsquo; and &lt;= &lsquo;High&rsquo; = &lsquo;edge pixel&rsquo; iff,<ul><li>it is connected to an &lsquo;edge pixel&rsquo; directly or via pixels between &lsquo;Low&rsquo; and &lsquo;High&rsquo;</li></ul></li></ul></li><li>Connect together components</li><li>Tunable: Sigma, thresholds</li><li>Canny edge pipeline</li></ul><figure><img src=/blogs/ox-hugo/2021-05-30_19-18-30_screenshot.png alt="Figure 3: from nptel [IIT Madras] CV lecture slide Week 2 part 1" width=900 height=210><figcaption><p>Figure 3: from nptel [IIT Madras] CV lecture slide Week 2 part 1</p></figcaption></figure><ul><li>Effect of \(\sigma\) in Cannyu Edge Detector<ul><li>The choice of σ (Gaussian kernel spread/size) depends on desired behavior<ul><li>large σ detects large-scale edges</li><li>small σ detects fine edges</li></ul></li></ul></li></ul><figure><img src=/blogs/ox-hugo/2021-05-30_20-29-59_screenshot.png alt="Figure 4: from nptel [IIT Madras] CV lecture slide Week 2 part 1" width=600 height=250><figcaption><p>Figure 4: from nptel [IIT Madras] CV lecture slide Week 2 part 1</p></figcaption></figure><h3 id=python-implementation>Python implementation</h3><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>canny_edge</span> <span class=o>=</span> <span class=n>cv2</span><span class=o>.</span><span class=n>Canny</span><span class=p>(</span><span class=n>img</span><span class=p>,</span> <span class=mi>50</span><span class=p>,</span> <span class=mi>80</span><span class=p>)</span>
<span class=c1># auto canny</span>
<span class=n>sigma</span> <span class=o>=</span> <span class=mf>0.3</span>
<span class=n>median</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>median</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
<span class=n>lower</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=nb>max</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=p>(</span><span class=mf>1.0</span> <span class=o>-</span> <span class=n>sigma</span><span class=p>)</span> <span class=o>*</span> <span class=n>median</span><span class=p>))</span>
<span class=n>upper</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=nb>min</span><span class=p>(</span><span class=mi>255</span><span class=p>,</span> <span class=p>(</span><span class=mf>1.0</span> <span class=o>+</span> <span class=n>sigma</span><span class=p>)</span> <span class=o>*</span> <span class=n>median</span><span class=p>))</span>
<span class=n>auto_canny</span> <span class=o>=</span> <span class=n>cv2</span><span class=o>.</span><span class=n>Canny</span><span class=p>(</span><span class=n>img</span><span class=p>,</span> <span class=n>lower</span><span class=p>,</span> <span class=n>upper</span><span class=p>)</span>
</code></pre></div></div><p style=font-size:1.65em;text-align:center><a href=/blogs/notes/2021-05-30-08-53-22z-gradient/>&#8678;</a>
<a href=/blogs/notes/2021-06-03-11-01-27z-decision_tree/>&#8680;</a></p><hr><div class=bl-section><h4>Links to this note</h4><div class=backlinks><ul><li><a href=/blogs/notes/2021-05-28-12-02-59z-image_convolution/>image filtering</a></li></ul></div></div><hr><footer><main><h3>Comments</h3><script src=https://utteranc.es/client.js repo=utsavdarlami/blogs issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></main></footer></article></main><footer></footer></body></html>